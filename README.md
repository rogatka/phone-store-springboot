#Phone Store
# SpringBoot

Для тестирования работы приложения можно использовать файлы create-tables.sql, populate-tables.sql.
Задать параметры для базы можно в файле /resources/persistence.properties 

Имеются классы: 
- User (firstname, lastname)
- Account (order_id, amount)
- Phone (model, description, count(общее количество на "складе"), price) 
- Order (account_id, status, totalSum)
- OrderCard (order_id, phone_id, count)
- OrderStatusHistory (order_id, status, timeStamp)

Отношения:
- User-Account                ====> One-To-One
- Account-Order               ====> One-To-Many
- OrderCard-Order             ====> Many-To-One
- Order-OrderStatusHistory    ====> One-To-Many
- OrderCard-Phone             ====> Many-To-One

- OrderCard - это одна единица заказа (т.е. заказ смартфона Samsung в кол-ве 2 шт - это одна карточка, 
заказ смартфона Apple в кол-ве 5 шт - это другая карточка, но вместе они относятся к одному заказу)
- У 1 юзера может быть только 1 аккаунт. 
- Аккаунт нельзя удалить, если имеются заказы, у которых статус "В процессе".
- Чтобы удалить юзера, нужно сначала удалить аккаунт.
- Нельзя добавить новую карточку к заказу, который уже "в работе"
- Нельзя удалить карточку, если заказ "в работе"
- При добавлении или удалении карточки сумма заказа пересчитывается, но сумма с аккаунта не снимается, потому что заказ еще окончательно не сформирован (функционал окончательного формирования заказа еще не готов)
- Предполагается, что при изменении статуса заказа, должна появлятсья запись в таблице OrderStatusHistory (еще не доработано)
- Frontend сделал как смог, по образцу. В модальном окне выводится сообщение в случае ошибки

* Frontend: можно добавить юзера, добавить ему аккаунт или просмотреть информацию о текущем аккаунте. 
В информации об аккаунте приведены заказы. Можно добавить заказ, затем добавив к нему карточки, если изменить существующий заказ

* Написан парсер для Json. Он заносит в базу phones из файла /resources/phones.json. Проверить можно по адресу контроллера JsonController

Написаны тесты. 

P.S. Все кроме одного проходят (updateOrderShouldReturn200IfValid() в TestOrderController). 
1 тест проходит только если убрать параметр orphanRemoval на поле List<OrderCard> orderCards в классе Order
Но тогда не удаляются ordercards при попытке их удалить, хотя сумма заказа пересчитывается.
